#!/usr/bin/env node
const fs = require('fs')
const path = require('path')

const vanilla = 'ts.supportedTypeScriptExtensions = [".ts", ".tsx", ".d.ts"]'
const patched = 'ts.supportedTypeScriptExtensions = [".ts", ".tsx", ".d.ts", ".as"]'

const libtsc = require.resolve('typescript/lib/tsc.js')
const source = fs.readFileSync(libtsc).toString()

if (source.indexOf(vanilla) > -1) // for demonstration purposes only. don't try this at home.
    fs.writeFileSync(libtsc, source.replace(vanilla, patched))

process.argv.push(path.join(__dirname, "..", "index.d.ts"))
require(libtsc)